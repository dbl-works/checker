#!/usr/bin/env ruby

STDERR.sync = STDOUT.sync = true

require_relative '../lib/dbl_checker/manager/client'
require_relative '../lib/dbl_checker/manager/healthz'

client_pid = fork do
  DBLChecker::Manager::Client.new.run
end

puts "started manager with pid: #{client_pid}"

DBLChecker::Manager::Healthz.new.serve(client_pid)
